{"remainingRequest":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ME\\Documents\\vue_project_20210407\\src\\store.js","dependencies":[{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\src\\store.js","mtime":1625061852894},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.set\";\nimport \"core-js/modules/web.dom.iterable\";\n//官方的 component\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  // strict: true,\n  state: {\n    //等於data\n    messages: [],\n    isLoading: false,\n    loadingaddtocart: 's',\n    products: [],\n    productdetail: [],\n    brands: [],\n    // pagination: {},\n    cart: {\n      carts: []\n    },\n    chosedindex: 0\n  },\n  actions: {\n    //等於method\n    updateLoading: function updateLoading(context, status) {\n      context.commit('LOADING', status);\n    },\n    updateLoadingAddToCart: function updateLoadingAddToCart(context, status) {\n      context.commit('LOADINGADDTOCART', status);\n    },\n    //取得產品\n    getProducts: function getProducts(context) {\n      var api = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/products/all\");\n      context.commit('LOADING', true);\n      axios.get(api).then(function (response) {\n        //不能用this.products去接資料，因為此處的this對應的是window。一定要const vm=this;然後這樣來接資料才可\n        context.commit('PRODUCTS', response.data.products);\n        context.commit('BRANDS', response.data.products); // vm.pagination = response.data.pagination;\n\n        context.commit(\"LOADING\", false);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //<<一次只load一頁資料>>\n    // getProducts(context, page) { //page = 1  \n    //   const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products/all`;\n    //   // const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products?page=${page}`;\n    //   context.commit('LOADING', true);\n    //   axios.get(api).then((response) => {\n    //     console.log(\"getProducts\", response);\n    //     context.commit('PRODUCTS', response.data.products);\n    //     context.commit('CATEGORIES', response.data.products);\n    //     context.commit('LOADING', false);\n    //     context.commit('PAGINATION', response.data.pagination);\n    //   });\n    // },\n    //取得購物車內容\n    getCart: function getCart(context) {\n      var url = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/cart\");\n      axios.get(url).then(function (response) {\n        if (response.data.data.carts) {\n          context.commit('CART', response.data.data);\n        } // console.log(\"getCart\", response.data.data);\n\n      }).catch(function (error) {\n        console.log(error);\n      });\n      ;\n    },\n    //加入購物車\n    addToCart: function addToCart(context, id) {\n      var qty = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '1';\n      //qty =1代表未傳入qty的話就會預設傳1\n      var url = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/cart\");\n      var cart = {\n        product_id: id,\n        qty: qty\n      };\n      context.commit('LOADINGADDTOCART', id);\n      axios.post(url, {\n        data: cart\n      }).then(function (response) {\n        var message = response.data.message;\n\n        if (response.data.success) {\n          context.dispatch(\"getCart\");\n          context.dispatch('updateMessage', {\n            message: message\n          });\n        } else {\n          context.dispatch('updateMessage', {\n            message: message,\n            status: 'danger'\n          });\n        }\n\n        context.commit('LOADINGADDTOCART', 's');\n      });\n    },\n    //移除購物車內容\n    removeCartItem: function removeCartItem(context, id) {\n      var url = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/cart/\").concat(id);\n      context.commit('LOADING', true);\n      axios.delete(url).then(function (response) {\n        // console.log(\"removeCartItemsuccess\", response.data.success);\n        context.commit('LOADING', false);\n        context.dispatch(\"getCart\"); // <<注意!!>> 此處用dispatch叫用getcart\n      }).catch(function (error) {\n        console.log(error);\n      });\n      ;\n    },\n    getProductDetail: function getProductDetail(context, id) {\n      var url = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/product/\").concat(id);\n      context.commit('LOADING', true);\n      axios.get(url).then(function (response) {\n        // console.log(\"getProductDetail\", response.data.product);\n        context.commit('PRODUCTDETAIL', response.data.product);\n        context.commit('LOADING', false);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    showDifferentJumbotron: function showDifferentJumbotron(context, chosedindex) {\n      context.commit('CHOSEDINDEX', chosedindex);\n    },\n    updateMessage: function updateMessage(context, _ref) {\n      var message = _ref.message,\n          _ref$status = _ref.status,\n          status = _ref$status === void 0 ? 'success' : _ref$status;\n      var timestamp = Math.floor(new Date() / 1000); // console.log('Alert:', message, status);\n\n      context.commit('MESSAGES', {\n        message: message,\n        status: status,\n        timestamp: timestamp\n      });\n      context.dispatch('removeMessageWithTiming', timestamp);\n    },\n    removeMessage: function removeMessage(context, num) {\n      context.commit('REMOVEMESSAGE', num);\n    },\n    removeMessageWithTiming: function removeMessageWithTiming(context, timestamp) {\n      setTimeout(function () {\n        context.commit('REMOVEMESSAGEWITHTIMING', timestamp);\n      }, 5000);\n    }\n  },\n  mutations: {\n    LOADING: function LOADING(state, status) {\n      state.isLoading = status;\n    },\n    LOADINGADDTOCART: function LOADINGADDTOCART(state, payload) {\n      state.loadingaddtocart = payload;\n    },\n    MESSAGES: function MESSAGES(state, payload) {\n      state.messages.push(payload);\n    },\n    REMOVEMESSAGE: function REMOVEMESSAGE(state, num) {\n      state.messages.splice(num, 1);\n    },\n    REMOVEMESSAGEWITHTIMING: function REMOVEMESSAGEWITHTIMING(state, timestamp) {\n      state.messages.forEach(function (item, i) {\n        if (item.timestamp === timestamp) {\n          state.messages.splice(i, 1);\n        }\n      });\n    },\n    //儲存資料得行為放到mustation裡面\n    PRODUCTS: function PRODUCTS(state, payload) {\n      state.products = payload;\n    },\n    BRANDS: function BRANDS(state, payload) {\n      state.brands = payload;\n    },\n    // PAGINATION(state, payload) {\n    //   state.pagination = payload;\n    // },\n    CART: function CART(state, payload) {\n      state.cart = payload;\n    },\n    PRODUCTDETAIL: function PRODUCTDETAIL(state, payload) {\n      state.productdetail = payload;\n    },\n    CHOSEDINDEX: function CHOSEDINDEX(state, payload) {\n      state.chosedindex = payload;\n    }\n  },\n  getters: {\n    //等於computed\n    products: function products(state) {\n      return state.products;\n    },\n    loadingaddtocart: function loadingaddtocart(state) {\n      return state.loadingaddtocart;\n    },\n    productdetail: function productdetail(state) {\n      return state.productdetail;\n    },\n    chosedindex: function chosedindex(state) {\n      return state.chosedindex;\n    },\n    brands: function brands(state) {\n      var brands = new Set(); //用set方式可以避免加入重複職\n\n      var categories_1 = new Set();\n      var categories_2 = new Set();\n      var categories_3 = new Set();\n      var categories_4 = new Set();\n      var combined2 = [];\n      categories_1.add(\"所有\");\n      categories_2.add(\"所有\");\n      categories_3.add(\"所有\");\n      categories_4.add(\"所有\");\n      state.products.forEach(function (item, i) {\n        brands.add(item.category);\n\n        if (item.title.indexOf(\"包\") != -1) {\n          categories_1.add(item.category);\n        }\n\n        if (item.title.indexOf(\"錶\") != -1) {\n          categories_2.add(item.category);\n        }\n\n        if (item.title.indexOf(\"指\") != -1 || item.title.indexOf(\"環\") != -1 || item.title.indexOf(\"項\") != -1) {\n          categories_3.add(item.category);\n        }\n\n        if (item.title.indexOf(\"鞋\") != -1) {\n          categories_4.add(item.category);\n        }\n      });\n      combined2 = [categories_1, categories_2, categories_3, categories_4];\n      state.brands = Array.from(combined2);\n      return state.brands;\n    },\n    // pagination(state) {\n    //   return state.pagination;\n    // },\n    cart: function cart(state) {\n      return state.cart;\n    }\n  }\n});",{"version":3,"sources":["C:/Users/ME/Documents/vue_project_20210407/src/store.js"],"names":["Vue","Vuex","axios","use","Store","state","messages","isLoading","loadingaddtocart","products","productdetail","brands","cart","carts","chosedindex","actions","updateLoading","context","status","commit","updateLoadingAddToCart","getProducts","api","process","env","VUE_APP_APIPATH","VUE_APP_CUSTOMPATH","get","then","response","data","catch","error","console","log","getCart","url","addToCart","id","qty","product_id","post","message","success","dispatch","removeCartItem","delete","getProductDetail","product","showDifferentJumbotron","updateMessage","timestamp","Math","floor","Date","removeMessage","num","removeMessageWithTiming","setTimeout","mutations","LOADING","LOADINGADDTOCART","payload","MESSAGES","push","REMOVEMESSAGE","splice","REMOVEMESSAGEWITHTIMING","forEach","item","i","PRODUCTS","BRANDS","CART","PRODUCTDETAIL","CHOSEDINDEX","getters","Set","categories_1","categories_2","categories_3","categories_4","combined2","add","category","title","indexOf","Array","from"],"mappings":"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","sourcesContent":["//官方的 component\r\nimport Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport axios from 'axios';\r\n\r\nVue.use(Vuex);\r\n\r\nexport default new Vuex.Store({\r\n  // strict: true,\r\n  state: {  //等於data\r\n    messages: [],\r\n    isLoading: false,\r\n    loadingaddtocart: 's',\r\n    products: [],\r\n    productdetail: [],\r\n    brands: [],\r\n    // pagination: {},\r\n    cart: {\r\n      carts: []\r\n    },\r\n    chosedindex:0\r\n  },\r\n  actions: { //等於method\r\n    updateLoading(context, status) {\r\n      context.commit('LOADING', status);\r\n    },\r\n    updateLoadingAddToCart(context, status) {\r\n      context.commit('LOADINGADDTOCART', status);\r\n    },\r\n    //取得產品\r\n    getProducts(context) {\r\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products/all`;\r\n\r\n      context.commit('LOADING', true);\r\n      axios.get(api)\r\n        .then((response) => {\r\n          //不能用this.products去接資料，因為此處的this對應的是window。一定要const vm=this;然後這樣來接資料才可\r\n          context.commit('PRODUCTS', response.data.products);\r\n          context.commit('BRANDS', response.data.products);\r\n          // vm.pagination = response.data.pagination;\r\n          context.commit(\"LOADING\", false);\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    //<<一次只load一頁資料>>\r\n    // getProducts(context, page) { //page = 1  \r\n    //   const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products/all`;\r\n    //   // const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products?page=${page}`;\r\n    //   context.commit('LOADING', true);\r\n    //   axios.get(api).then((response) => {\r\n    //     console.log(\"getProducts\", response);\r\n    //     context.commit('PRODUCTS', response.data.products);\r\n    //     context.commit('CATEGORIES', response.data.products);\r\n    //     context.commit('LOADING', false);\r\n    //     context.commit('PAGINATION', response.data.pagination);\r\n    //   });\r\n    // },\r\n    //取得購物車內容\r\n    getCart(context) {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`;\r\n      axios.get(url).then((response) => {\r\n        if (response.data.data.carts) {\r\n          context.commit('CART', response.data.data);\r\n        }\r\n        // console.log(\"getCart\", response.data.data);\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n      });;\r\n    },\r\n    //加入購物車\r\n    addToCart(context, id, qty = '1') {//qty =1代表未傳入qty的話就會預設傳1\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`;\r\n      const cart = {\r\n        product_id: id,\r\n        qty,\r\n      };\r\n      context.commit('LOADINGADDTOCART', id);\r\n      axios.post(url, { data: cart }).then((response) => {\r\n        let message = response.data.message;\r\n        if (response.data.success) {\r\n          context.dispatch(\"getCart\");\r\n          context.dispatch('updateMessage', { message });\r\n        } else {\r\n          context.dispatch('updateMessage', { message, status: 'danger' });\r\n        }\r\n        context.commit('LOADINGADDTOCART', 's');\r\n      });\r\n    },\r\n    //移除購物車內容\r\n    removeCartItem(context, id) {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart/${id}`;\r\n      context.commit('LOADING', true);\r\n      axios.delete(url).then((response) => {\r\n        // console.log(\"removeCartItemsuccess\", response.data.success);\r\n        context.commit('LOADING', false);\r\n        context.dispatch(\"getCart\"); // <<注意!!>> 此處用dispatch叫用getcart\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n      });;\r\n    },\r\n    getProductDetail(context, id) {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/product/${id}`;\r\n      context.commit('LOADING', true);\r\n      axios.get(url)\r\n        .then((response) => {\r\n          // console.log(\"getProductDetail\", response.data.product);\r\n          context.commit('PRODUCTDETAIL', response.data.product);\r\n          context.commit('LOADING', false);\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    showDifferentJumbotron(context, chosedindex) {\r\n      context.commit('CHOSEDINDEX', chosedindex);\r\n    },\r\n    updateMessage(context, { message, status = 'success' }) { \r\n      const timestamp = Math.floor(new Date() / 1000);\r\n      // console.log('Alert:', message, status);\r\n      context.commit('MESSAGES', { message, status, timestamp });\r\n      context.dispatch('removeMessageWithTiming', timestamp);\r\n    },\r\n    removeMessage(context, num) {\r\n      context.commit('REMOVEMESSAGE', num);\r\n    },\r\n    removeMessageWithTiming(context, timestamp) {\r\n      setTimeout(() => {\r\n        context.commit('REMOVEMESSAGEWITHTIMING', timestamp);\r\n      }, 5000);\r\n    },\r\n  },\r\n  mutations: { \r\n    LOADING(state, status) {\r\n      state.isLoading = status;\r\n    },\r\n    LOADINGADDTOCART(state, payload) {\r\n      state.loadingaddtocart = payload;\r\n    },\r\n    MESSAGES(state, payload) {\r\n      state.messages.push(payload);\r\n    },\r\n    REMOVEMESSAGE (state, num) {\r\n      state.messages.splice(num, 1);\r\n    },\r\n    REMOVEMESSAGEWITHTIMING(state, timestamp) {\r\n      state.messages.forEach((item, i) => {\r\n        if (item.timestamp === timestamp) {\r\n          state.messages.splice(i, 1);\r\n        }\r\n      });\r\n    },\r\n    //儲存資料得行為放到mustation裡面\r\n    PRODUCTS(state, payload) {\r\n      state.products = payload;\r\n    },\r\n    BRANDS(state, payload) {\r\n      state.brands = payload;\r\n    },\r\n    // PAGINATION(state, payload) {\r\n    //   state.pagination = payload;\r\n    // },\r\n    CART(state, payload) {\r\n      state.cart = payload;\r\n    },\r\n    PRODUCTDETAIL(state, payload) {\r\n      state.productdetail = payload;\r\n    },\r\n    CHOSEDINDEX(state, payload) {\r\n      state.chosedindex = payload;\r\n    },\r\n  },\r\n  getters: { //等於computed\r\n    products(state) {\r\n      return state.products;\r\n    },\r\n    loadingaddtocart(state) {\r\n      return state.loadingaddtocart;\r\n    },\r\n    productdetail(state) {\r\n      return state.productdetail;\r\n    },\r\n    chosedindex(state) {\r\n      return state.chosedindex;\r\n    },\r\n    brands(state) {\r\n      const brands = new Set(); //用set方式可以避免加入重複職\r\n      const categories_1 = new Set();\r\n      const categories_2 = new Set();\r\n      const categories_3 = new Set();\r\n      const categories_4 = new Set();\r\n      let combined2 = [];\r\n      categories_1.add(\"所有\");\r\n      categories_2.add(\"所有\");\r\n      categories_3.add(\"所有\");\r\n      categories_4.add(\"所有\");\r\n      state.products.forEach((item, i) => {\r\n        brands.add(item.category);\r\n        if (item.title.indexOf(\"包\") != -1) {\r\n          categories_1.add(item.category);\r\n        }\r\n        if (item.title.indexOf(\"錶\") != -1) {\r\n          categories_2.add(item.category);\r\n        }\r\n        if (\r\n          item.title.indexOf(\"指\") != -1 ||\r\n          item.title.indexOf(\"環\") != -1 ||\r\n          item.title.indexOf(\"項\") != -1\r\n        ) {\r\n          categories_3.add(item.category);\r\n        }\r\n        if (item.title.indexOf(\"鞋\") != -1) {\r\n          categories_4.add(item.category);\r\n        }\r\n      });\r\n      combined2 = [categories_1, categories_2, categories_3, categories_4];\r\n      state.brands = Array.from(combined2);\r\n      return state.brands;\r\n    },\r\n    // pagination(state) {\r\n    //   return state.pagination;\r\n    // },\r\n    cart(state) {\r\n      return state.cart;\r\n    },\r\n  }\r\n});\r\n"]}]}