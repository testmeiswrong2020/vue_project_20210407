{"remainingRequest":"C:\\Users\\ME\\Documents\\vue_project_20210404\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ME\\Documents\\vue_project_20210404\\src\\store.js","dependencies":[{"path":"C:\\Users\\ME\\Documents\\vue_project_20210404\\src\\store.js","mtime":1618219960964},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210404\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210404\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/web.dom.iterable\";\n//官方的 component\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    //等於data\n    isLoading: false,\n    currentPage: 0,\n    products: [],\n    categories: [],\n    pagination: {},\n    cart: {\n      carts: []\n    }\n  },\n  actions: {\n    //等於method\n    updateLoading: function updateLoading(context, status) {\n      context.commit('LOADING', status);\n    },\n    //取得產品\n    getProducts: function getProducts(context, page) {\n      //page = 1  \n      var api = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/products/all\"); // const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products?page=${page}`;\n\n      context.commit('LOADING', true);\n      axios.get(api).then(function (response) {\n        console.log(\"getProducts\", response);\n        context.commit('PRODUCTS', response.data.products);\n        context.commit('CATEGORIES', response.data.products);\n        context.commit('LOADING', false);\n        context.commit('PAGINATION', response.data.pagination);\n      });\n    },\n    //取得購物車內容\n    getCart: function getCart(context) {\n      var url = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/cart\");\n      axios.get(url).then(function (response) {\n        if (response.data.data.carts) {\n          context.commit('CART', response.data.data);\n        }\n\n        console.log(\"getCart\", response.data.data);\n      });\n    },\n    //移除購物車內容\n    removeCartItem: function removeCartItem(context, id) {\n      var url = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/cart/\").concat(id);\n      context.commit('LOADING', true);\n      axios.delete(url).then(function (response) {\n        // console.log(\"removeCartItemsuccess\", response.data.success);\n        context.commit('LOADING', false);\n\n        if (response.data.success) {\n          // this.$bus.$emit(\"message:push\", response.data.message, \"success\");\n          context.dispatch(\"getCart\"); // <<注意!!>> 此處用dispatch叫用getcart\n        } // else{\n        //   this.$bus.$emit(\"message:push\", response.data.message, \"danger\");\n        // }\n\n      });\n    }\n  },\n  mutations: {\n    LOADING: function LOADING(state, status) {\n      state.isLoading = status;\n    },\n    //儲存資料得行為放到mustation裡面\n    PRODUCTS: function PRODUCTS(state, payload) {\n      state.products = payload;\n    },\n    CATEGORIES: function CATEGORIES(state, payload) {\n      var categories_1 = [];\n      var categories_2 = [];\n      var categories_3 = [];\n      var categories_4 = [];\n      var combined2 = [];\n      categories_1.push(\"所有\");\n      categories_2.push(\"所有\");\n      categories_3.push(\"所有\");\n      categories_4.push(\"所有\");\n      payload.forEach(function (item) {\n        if (item.title.indexOf('包') != -1 && categories_1.includes(item.category) === false) {\n          categories_1.push(item.category);\n        }\n\n        if (item.title.indexOf('錶') != -1 && categories_2.includes(item.category) === false) {\n          categories_2.push(item.category);\n        }\n\n        if (item.title.indexOf('指') != -1 && categories_3.includes(item.category) === false) {\n          categories_3.push(item.category);\n        }\n\n        if (item.title.indexOf('鞋') != -1 && categories_4.includes(item.category) === false) {\n          categories_4.push(item.category);\n        }\n      });\n      combined2 = [categories_1, categories_2, categories_3, categories_4]; // console.log(\"----\",combined2);\n\n      state.categories = Array.from(combined2);\n    },\n    PAGINATION: function PAGINATION(state, payload) {\n      state.pagination = payload;\n    },\n    CART: function CART(state, payload) {\n      state.cart = payload;\n    }\n  },\n  getters: {\n    //等於computed\n    products: function products(state) {\n      return state.products;\n    },\n    categories: function categories(state) {\n      return state.categories;\n    },\n    pagination: function pagination(state) {\n      return state.pagination;\n    },\n    cart: function cart(state) {\n      return state.cart;\n    }\n  }\n});",{"version":3,"sources":["C:/Users/ME/Documents/vue_project_20210404/src/store.js"],"names":["Vue","Vuex","axios","use","Store","state","isLoading","currentPage","products","categories","pagination","cart","carts","actions","updateLoading","context","status","commit","getProducts","page","api","process","env","VUE_APP_APIPATH","VUE_APP_CUSTOMPATH","get","then","response","console","log","data","getCart","url","removeCartItem","id","delete","success","dispatch","mutations","LOADING","PRODUCTS","payload","CATEGORIES","categories_1","categories_2","categories_3","categories_4","combined2","push","forEach","item","title","indexOf","includes","category","Array","from","PAGINATION","CART","getters"],"mappings":"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","sourcesContent":["//官方的 component\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport axios from 'axios';\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {  //等於data\n    isLoading: false,\n    currentPage: 0,\n    products: [],\n    categories: [],\n    pagination: {},\n    cart: {\n      carts: []\n    },\n  },\n  actions: { //等於method\n    updateLoading(context, status) {\n      context.commit('LOADING', status);\n    },\n    //取得產品\n    getProducts(context, page) { //page = 1  \n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products/all`;\n      // const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/products?page=${page}`;\n      context.commit('LOADING', true);\n      axios.get(api).then((response) => {\n          console.log(\"getProducts\", response);\n          context.commit('PRODUCTS', response.data.products);\n          context.commit('CATEGORIES', response.data.products);\n          context.commit('LOADING', false);\n          context.commit('PAGINATION', response.data.pagination);\n      \n      });\n    },\n    //取得購物車內容\n    getCart(context) {\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`;\n      axios.get(url).then((response) => {\n        if (response.data.data.carts) {\n          context.commit('CART', response.data.data);\n        }\n        console.log(\"getCart\", response.data.data);\n      });\n    },\n    //移除購物車內容\n    removeCartItem(context, id) {\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart/${id}`;\n      context.commit('LOADING', true);\n      axios.delete(url).then((response) => {\n        // console.log(\"removeCartItemsuccess\", response.data.success);\n        context.commit('LOADING', false);\n        if (response.data.success) {\n          // this.$bus.$emit(\"message:push\", response.data.message, \"success\");\n          context.dispatch(\"getCart\"); // <<注意!!>> 此處用dispatch叫用getcart\n        }\n        // else{\n        //   this.$bus.$emit(\"message:push\", response.data.message, \"danger\");\n        // }\n      });\n    },\n  },\n  mutations: { \n    LOADING(state, status) {\n      state.isLoading = status;\n    },\n    //儲存資料得行為放到mustation裡面\n    PRODUCTS(state, payload) {\n      state.products = payload;\n    },\n    CATEGORIES(state, payload) {\n      let categories_1 = [];\n      let categories_2 = [];\n      let categories_3 =[];\n      let categories_4 =[];\n      let combined2 =[];\n      categories_1.push(\"所有\");\n      categories_2.push(\"所有\");\n      categories_3.push(\"所有\");\n      categories_4.push(\"所有\");\n      payload.forEach((item) => {\n        if(item.title.indexOf('包')!=-1&&categories_1.includes(item.category) === false){\n          categories_1.push(item.category);\n        }\n        if(item.title.indexOf('錶')!=-1&&categories_2.includes(item.category) === false){\n          categories_2.push(item.category);\n        }\n        if(item.title.indexOf('指')!=-1&&categories_3.includes(item.category) === false){\n          categories_3.push(item.category);\n        }\n\n        if(item.title.indexOf('鞋')!=-1&&categories_4.includes(item.category) === false){\n          categories_4.push(item.category);\n        }\n  \n      });\n       combined2 = [categories_1,categories_2,categories_3,categories_4];\n      // console.log(\"----\",combined2);\n      state.categories = Array.from(combined2);\n    },\n    PAGINATION(state, payload) {\n      state.pagination = payload;\n    },\n    CART(state, payload) {\n      state.cart = payload;\n    },\n  },\n  getters: { //等於computed\n    products(state) {\n      return state.products;\n    },\n \n    categories(state) {\n      return state.categories;\n    },\n    pagination(state) {\n      return state.pagination;\n    },\n    cart(state) {\n      return state.cart;\n    },\n  }\n});\n"]}]}