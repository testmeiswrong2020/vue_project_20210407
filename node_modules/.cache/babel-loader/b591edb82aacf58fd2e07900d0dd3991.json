{"remainingRequest":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ME\\Documents\\vue_project_20210407\\src\\views\\Checkout.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\src\\views\\Checkout.vue","mtime":1684676156324},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\babel.config.js","mtime":1684676156031},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"C:/Users/ME/Documents/vue_project_20210407/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { mapGetters, mapActions } from \"vuex\";\nexport default {\n  data: function data() {\n    return {\n      form: {\n        user: {\n          name: \"\",\n          email: \"\",\n          tel: \"\",\n          address: \"\"\n        },\n        message: \"\"\n      }\n    };\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions([\"getCart\"])), {}, {\n    //送出訂單\n    createOrder: function createOrder() {\n      var vm = this;\n      var url = \"\".concat(process.env.VUE_APP_APIPATH, \"/api/\").concat(process.env.VUE_APP_CUSTOMPATH, \"/order\");\n      var order = vm.form;\n      vm.$store.dispatch(\"updateLoading\", true);\n      vm.$http.post(url, {\n        data: order\n      }).then(function (response) {\n        // console.log(\"createOrder\", response.data);\n        var message = response.data.message;\n        if (response.data.success) {\n          vm.$router.push(\"/final-checkout/\".concat(response.data.orderId));\n          vm.$store.dispatch(\"getCart\");\n          vm.$store.dispatch('updateMessage', {\n            message: message\n          }); //feedback建立訂單訊息 \n        } else {\n          vm.$store.dispatch('updateMessage', {\n            message: message,\n            status: 'danger'\n          });\n        }\n        vm.$store.dispatch(\"updateLoading\", false);\n      });\n    }\n  }),\n  computed: _objectSpread({}, mapGetters([\"cart\"]))\n};",{"version":3,"names":["mapGetters","mapActions","data","form","user","name","email","tel","address","message","methods","_objectSpread","createOrder","vm","url","concat","process","env","VUE_APP_APIPATH","VUE_APP_CUSTOMPATH","order","$store","dispatch","$http","post","then","response","success","$router","push","orderId","status","computed"],"sources":["src/views/Checkout.vue"],"sourcesContent":["<template>\r\n  <div class=\"pt-4 pb-5\">\r\n    <div class=\"container \">\r\n      <section class=\"row text-center\">\r\n        <div class=\"col-md-4 col-sm-12\">\r\n          <div class=\"alert alert-primary  alert-rounded mb-2\" role=\"alert\">\r\n            1.輸入訂單資料\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-4 col-sm-12\">\r\n          <div\r\n            class=\"alert alert-light border-primary text-primary alert-rounded mb-2\"\r\n            role=\"alert\"\r\n          >\r\n            2.金流付款\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-4 col-sm-12\">\r\n          <div\r\n            class=\"alert alert-light border-primary text-primary alert-rounded mb-2\"\r\n            role=\"alert\"\r\n          >\r\n            3.完成\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <validation-observer v-slot=\"{ invalid }\">\r\n        <section class=\"row justify-content-center mt-4\">\r\n          <div class=\"col-md-6\">\r\n            <h5 class=\"mb-2 text-center\">訂單資訊</h5>\r\n\r\n            <form  class=\"needs-validation\">\r\n              <div class=\"d-inline-flex\">\r\n                <validation-provider\r\n                  rules=\"required\"\r\n                  v-slot=\"{ errors, classes }\"\r\n                >\r\n                  <div class=\"form-group mr-3\">\r\n                    <label for=\"username\" class=\"text-dark\">收件人姓名</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      name=\"收件人姓名\"\r\n                      id=\"username\"\r\n                      :class=\"classes\"\r\n                      v-model=\"form.user.name\"\r\n                      placeholder=\"請輸入姓名\"\r\n                    />\r\n                    <span class=\"text-danger\">{{ errors[0] }}</span>\r\n                  </div>\r\n                </validation-provider>\r\n\r\n                <validation-provider\r\n                  rules=\"required\"\r\n                  v-slot=\"{ errors, classes }\"\r\n                >\r\n                  <div class=\"form-group\">\r\n                    <label for=\"usertel\" class=\"text-dark\">收件人電話</label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      name=\"收件人電話\"\r\n                      class=\"form-control\"\r\n                      id=\"usertel\"\r\n                      :class=\"classes\"\r\n                      v-model=\"form.user.tel\"\r\n                      placeholder=\"請輸入電話\"\r\n                    />\r\n                    <span class=\"text-danger\">{{ errors[0] }}</span>\r\n                  </div>\r\n                </validation-provider>\r\n              </div>\r\n\r\n              <validation-provider\r\n                rules=\"required|email\"\r\n                v-slot=\"{ errors, classes }\"\r\n              >\r\n                <div class=\"form-group\">\r\n                  <label for=\"useremail\" class=\"text-dark\">電子信箱</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    class=\"form-control\"\r\n                    name=\"電子信箱\"\r\n                    id=\"useremail\"\r\n                    :class=\"classes\"\r\n                    v-model=\"form.user.email\"\r\n                    placeholder=\"請輸入電子信箱\"\r\n                    required\r\n                  />\r\n                  <span class=\"text-danger\">{{ errors[0] }}</span>\r\n                </div>\r\n              </validation-provider>\r\n\r\n              <validation-provider\r\n                rules=\"required\"\r\n                v-slot=\"{ errors, classes }\"\r\n              >\r\n                <div class=\"form-group\">\r\n                  <label for=\"useraddress\" class=\"text-dark\">收件人地址</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    name=\"收件人地址\"\r\n                    :class=\"classes\"\r\n                    id=\"useraddress\"\r\n                    v-model=\"form.user.address\"\r\n                    placeholder=\"請輸入地址\"\r\n                  />\r\n                  <span class=\"text-danger\">{{ errors[0] }}</span>\r\n                </div>\r\n\r\n                <!--地址欄位不得留空-->\r\n              </validation-provider>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"comment\" class=\"text-dark mr-1\">留言 </label>(選填)\r\n                <textarea\r\n                  id=\"comment\"\r\n                  class=\"form-control\"\r\n                  cols=\"30\"\r\n                  rows=\"4\"\r\n                  v-model=\"form.message\"\r\n                ></textarea>\r\n                <span class=\"text-danger\"></span>\r\n              </div>\r\n              <div class=\"text-right\"></div>\r\n            </form>\r\n          </div>\r\n          <div class=\"col-md-6\">\r\n            <div class=\"card shadow\">\r\n              <h5 class=\"my-3 text-center\">您的訂單</h5>\r\n              <div class=\"container\">\r\n                <table class=\"table\">\r\n                  <thead>\r\n                    <th>商品</th>\r\n                    <th></th>\r\n                    <th>小計</th>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"(item,index) in cart.carts\" :key=\"index\">\r\n                      <td class=\"align-middle\" colspan=\"2\">\r\n                        {{ item.product.title }} X {{ item.qty }}\r\n                      </td>\r\n                      <td class=\"align-middle text-right\">\r\n                        {{ item.final_total | currency }}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                  <tfoot>\r\n                    <tr>\r\n                      <td colspan=\"2\" class=\"text-left font-weight-bold\">\r\n                        總計\r\n                      </td>\r\n                      <td class=\"text-right\">{{ cart.total | currency }}</td>\r\n                    </tr>\r\n                  </tfoot>\r\n                </table>\r\n                <div class=\"container mb-3 mt-auto\">\r\n                  <form class=\"text-dark\">\r\n                    <div class=\"form-row align-items-around\">\r\n                      <legend\r\n                        class=\"font-weight-bold col-form-label col-sm-2 float-left pt-0 text-nowrap\"\r\n                      >\r\n                        配送方式\r\n                      </legend>\r\n                      <div class=\"col-sm-10 text-right\">\r\n                        <div class=\"form-check mr-3\">\r\n                          <input\r\n                            class=\"form-check-input\"\r\n                            type=\"radio\"\r\n                            name=\"gridRadios\"\r\n                            id=\"gridRadios1\"\r\n                            value=\"option1\"\r\n                            checked\r\n                          />\r\n                          <label class=\"form-check-label\" for=\"gridRadios1\">\r\n                            超商付款\r\n                          </label>\r\n                        </div>\r\n                        <div class=\"form-check\">\r\n                          <input\r\n                            class=\"form-check-input\"\r\n                            type=\"radio\"\r\n                            name=\"gridRadios\"\r\n                            id=\"gridRadios2\"\r\n                            value=\"option2\"\r\n                          />\r\n                          <label class=\"form-check-label\" for=\"gridRadios2\">\r\n                            信用卡付款\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </form>\r\n                   <button @click.prevent=\"createOrder\" class=\"btn btn-success w-100 mt-3\" :disabled=\"invalid\">\r\n                  送出訂單\r\n                </button>\r\n                </div>\r\n               \r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </validation-observer>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style >\r\n.custom-font-size {\r\n  font-size: 1rem;\r\n}\r\n</style>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        user: {\r\n          name: \"\",\r\n          email: \"\",\r\n          tel: \"\",\r\n          address: \"\",\r\n        },\r\n        message: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions([\"getCart\"]),\r\n    //送出訂單\r\n    createOrder() {\r\n      const vm = this;\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order`;\r\n      const order = vm.form;\r\n      vm.$store.dispatch(\"updateLoading\", true);\r\n      vm.$http.post(url, { data: order }).then((response) => {\r\n        // console.log(\"createOrder\", response.data);\r\n        let message=response.data.message;\r\n        if (response.data.success) {\r\n           vm.$router.push(`/final-checkout/${response.data.orderId}`);\r\n           vm.$store.dispatch(\"getCart\");\r\n           vm.$store.dispatch('updateMessage', { message});//feedback建立訂單訊息 \r\n        } else {\r\n           vm.$store.dispatch('updateMessage', { message, status: 'danger' });\r\n        }\r\n        vm.$store.dispatch(\"updateLoading\", false);\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"cart\"]),\r\n  },\r\n};\r\n</script>\r\n"],"mappings":";;;;;;AAoNA,SAAAA,UAAA,EAAAC,UAAA;AACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,IAAA;QACAC,IAAA;UACAC,IAAA;UACAC,KAAA;UACAC,GAAA;UACAC,OAAA;QACA;QACAC,OAAA;MACA;IACA;EACA;EACAC,OAAA,EAAAC,aAAA,CAAAA,aAAA,KACAV,UAAA;IACA;IACAW,WAAA,WAAAA,YAAA;MACA,IAAAC,EAAA;MACA,IAAAC,GAAA,MAAAC,MAAA,CAAAC,OAAA,CAAAC,GAAA,CAAAC,eAAA,WAAAH,MAAA,CAAAC,OAAA,CAAAC,GAAA,CAAAE,kBAAA;MACA,IAAAC,KAAA,GAAAP,EAAA,CAAAV,IAAA;MACAU,EAAA,CAAAQ,MAAA,CAAAC,QAAA;MACAT,EAAA,CAAAU,KAAA,CAAAC,IAAA,CAAAV,GAAA;QAAAZ,IAAA,EAAAkB;MAAA,GAAAK,IAAA,WAAAC,QAAA;QACA;QACA,IAAAjB,OAAA,GAAAiB,QAAA,CAAAxB,IAAA,CAAAO,OAAA;QACA,IAAAiB,QAAA,CAAAxB,IAAA,CAAAyB,OAAA;UACAd,EAAA,CAAAe,OAAA,CAAAC,IAAA,oBAAAd,MAAA,CAAAW,QAAA,CAAAxB,IAAA,CAAA4B,OAAA;UACAjB,EAAA,CAAAQ,MAAA,CAAAC,QAAA;UACAT,EAAA,CAAAQ,MAAA,CAAAC,QAAA;YAAAb,OAAA,EAAAA;UAAA;QACA;UACAI,EAAA,CAAAQ,MAAA,CAAAC,QAAA;YAAAb,OAAA,EAAAA,OAAA;YAAAsB,MAAA;UAAA;QACA;QACAlB,EAAA,CAAAQ,MAAA,CAAAC,QAAA;MACA;IACA;EAAA,EACA;EACAU,QAAA,EAAArB,aAAA,KACAX,UAAA;AAEA"}]}