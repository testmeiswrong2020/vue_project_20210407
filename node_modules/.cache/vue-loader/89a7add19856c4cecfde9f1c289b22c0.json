{"remainingRequest":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ME\\Documents\\vue_project_20210407\\src\\views\\Checkout.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\src\\views\\Checkout.vue","mtime":1625063931279},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\css-loader\\dist\\cjs.js","mtime":1629393271000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1629393271000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\postcss-loader\\src\\index.js","mtime":1629393271000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1629393271000},{"path":"C:\\Users\\ME\\Documents\\vue_project_20210407\\node_modules\\vue-loader\\lib\\index.js","mtime":1629393271000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.custom-font-size {\r\n  font-size: 1rem;\r\n}\r\n",{"version":3,"sources":["Checkout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+MA;AACA;AACA","file":"Checkout.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"pt-4 pb-5\">\r\n    <div class=\"container \">\r\n      <section class=\"row text-center\">\r\n        <div class=\"col-md-4 col-sm-12\">\r\n          <div class=\"alert alert-primary  alert-rounded mb-2\" role=\"alert\">\r\n            1.輸入訂單資料\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-4 col-sm-12\">\r\n          <div\r\n            class=\"alert alert-light border-primary text-primary alert-rounded mb-2\"\r\n            role=\"alert\"\r\n          >\r\n            2.金流付款\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-4 col-sm-12\">\r\n          <div\r\n            class=\"alert alert-light border-primary text-primary alert-rounded mb-2\"\r\n            role=\"alert\"\r\n          >\r\n            3.完成\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <validation-observer v-slot=\"{ invalid }\">\r\n        <section class=\"row justify-content-center mt-4\">\r\n          <div class=\"col-md-6\">\r\n            <h5 class=\"mb-2 text-center\">訂單資訊</h5>\r\n\r\n            <form  class=\"needs-validation\">\r\n              <div class=\"d-inline-flex\">\r\n                <validation-provider\r\n                  rules=\"required\"\r\n                  v-slot=\"{ errors, classes }\"\r\n                >\r\n                  <div class=\"form-group mr-3\">\r\n                    <label for=\"username\" class=\"text-dark\">收件人姓名</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      class=\"form-control\"\r\n                      name=\"收件人姓名\"\r\n                      id=\"username\"\r\n                      :class=\"classes\"\r\n                      v-model=\"form.user.name\"\r\n                      placeholder=\"請輸入姓名\"\r\n                    />\r\n                    <span class=\"text-danger\">{{ errors[0] }}</span>\r\n                  </div>\r\n                </validation-provider>\r\n\r\n                <validation-provider\r\n                  rules=\"required\"\r\n                  v-slot=\"{ errors, classes }\"\r\n                >\r\n                  <div class=\"form-group\">\r\n                    <label for=\"usertel\" class=\"text-dark\">收件人電話</label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      name=\"收件人電話\"\r\n                      class=\"form-control\"\r\n                      id=\"usertel\"\r\n                      :class=\"classes\"\r\n                      v-model=\"form.user.tel\"\r\n                      placeholder=\"請輸入電話\"\r\n                    />\r\n                    <span class=\"text-danger\">{{ errors[0] }}</span>\r\n                  </div>\r\n                </validation-provider>\r\n              </div>\r\n\r\n              <validation-provider\r\n                rules=\"required|email\"\r\n                v-slot=\"{ errors, classes }\"\r\n              >\r\n                <div class=\"form-group\">\r\n                  <label for=\"useremail\" class=\"text-dark\">電子信箱</label>\r\n                  <input\r\n                    type=\"email\"\r\n                    class=\"form-control\"\r\n                    name=\"電子信箱\"\r\n                    id=\"useremail\"\r\n                    :class=\"classes\"\r\n                    v-model=\"form.user.email\"\r\n                    placeholder=\"請輸入電子信箱\"\r\n                    required\r\n                  />\r\n                  <span class=\"text-danger\">{{ errors[0] }}</span>\r\n                </div>\r\n              </validation-provider>\r\n\r\n              <validation-provider\r\n                rules=\"required\"\r\n                v-slot=\"{ errors, classes }\"\r\n              >\r\n                <div class=\"form-group\">\r\n                  <label for=\"useraddress\" class=\"text-dark\">收件人地址</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    name=\"收件人地址\"\r\n                    :class=\"classes\"\r\n                    id=\"useraddress\"\r\n                    v-model=\"form.user.address\"\r\n                    placeholder=\"請輸入地址\"\r\n                  />\r\n                  <span class=\"text-danger\">{{ errors[0] }}</span>\r\n                </div>\r\n\r\n                <!--地址欄位不得留空-->\r\n              </validation-provider>\r\n\r\n              <div class=\"form-group\">\r\n                <label for=\"comment\" class=\"text-dark mr-1\">留言 </label>(選填)\r\n                <textarea\r\n                  id=\"comment\"\r\n                  class=\"form-control\"\r\n                  cols=\"30\"\r\n                  rows=\"4\"\r\n                  v-model=\"form.message\"\r\n                ></textarea>\r\n                <span class=\"text-danger\"></span>\r\n              </div>\r\n              <div class=\"text-right\"></div>\r\n            </form>\r\n          </div>\r\n          <div class=\"col-md-6\">\r\n            <div class=\"card shadow\">\r\n              <h5 class=\"my-3 text-center\">您的訂單</h5>\r\n              <div class=\"container\">\r\n                <table class=\"table\">\r\n                  <thead>\r\n                    <th>商品</th>\r\n                    <th></th>\r\n                    <th>小計</th>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr v-for=\"(item,index) in cart.carts\" :key=\"index\">\r\n                      <td class=\"align-middle\" colspan=\"2\">\r\n                        {{ item.product.title }} X {{ item.qty }}\r\n                      </td>\r\n                      <td class=\"align-middle text-right\">\r\n                        {{ item.final_total | currency }}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                  <tfoot>\r\n                    <tr>\r\n                      <td colspan=\"2\" class=\"text-left font-weight-bold\">\r\n                        總計\r\n                      </td>\r\n                      <td class=\"text-right\">{{ cart.total | currency }}</td>\r\n                    </tr>\r\n                  </tfoot>\r\n                </table>\r\n                <div class=\"container mb-3 mt-auto\">\r\n                  <form class=\"text-dark\">\r\n                    <div class=\"form-row align-items-around\">\r\n                      <legend\r\n                        class=\"font-weight-bold col-form-label col-sm-2 float-left pt-0 text-nowrap\"\r\n                      >\r\n                        配送方式\r\n                      </legend>\r\n                      <div class=\"col-sm-10 text-right\">\r\n                        <div class=\"form-check mr-3\">\r\n                          <input\r\n                            class=\"form-check-input\"\r\n                            type=\"radio\"\r\n                            name=\"gridRadios\"\r\n                            id=\"gridRadios1\"\r\n                            value=\"option1\"\r\n                            checked\r\n                          />\r\n                          <label class=\"form-check-label\" for=\"gridRadios1\">\r\n                            超商付款\r\n                          </label>\r\n                        </div>\r\n                        <div class=\"form-check\">\r\n                          <input\r\n                            class=\"form-check-input\"\r\n                            type=\"radio\"\r\n                            name=\"gridRadios\"\r\n                            id=\"gridRadios2\"\r\n                            value=\"option2\"\r\n                          />\r\n                          <label class=\"form-check-label\" for=\"gridRadios2\">\r\n                            信用卡付款\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </form>\r\n                   <button @click.prevent=\"createOrder\" class=\"btn btn-success w-100 mt-3\" :disabled=\"invalid\">\r\n                  送出訂單\r\n                </button>\r\n                </div>\r\n               \r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </validation-observer>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style >\r\n.custom-font-size {\r\n  font-size: 1rem;\r\n}\r\n</style>\r\n<script>\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        user: {\r\n          name: \"\",\r\n          email: \"\",\r\n          tel: \"\",\r\n          address: \"\",\r\n        },\r\n        message: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions([\"getCart\"]),\r\n    //送出訂單\r\n    createOrder() {\r\n      const vm = this;\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order`;\r\n      const order = vm.form;\r\n      vm.$store.dispatch(\"updateLoading\", true);\r\n      vm.$http.post(url, { data: order }).then((response) => {\r\n        // console.log(\"createOrder\", response.data);\r\n        let message=response.data.message;\r\n        if (response.data.success) {\r\n           vm.$router.push(`/final-checkout/${response.data.orderId}`);\r\n           vm.$store.dispatch(\"getCart\");\r\n           vm.$store.dispatch('updateMessage', { message});//feedback建立訂單訊息 \r\n        } else {\r\n           vm.$store.dispatch('updateMessage', { message, status: 'danger' });\r\n        }\r\n        vm.$store.dispatch(\"updateLoading\", false);\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"cart\"]),\r\n  },\r\n};\r\n</script>\r\n"]}]}